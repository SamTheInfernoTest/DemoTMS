import{j as e,u as C,a as P,r as b}from"./index-Ci3233eU.js";import{Q as B,B as t}from"./react-toastify.esm-CZEk71Ew.js";const f=({image:r,setImage:d,w:n,h:p,updateImage:u})=>{const g=h=>{const c=h.target.files[0],l=new FileReader;l.onload=()=>{try{u(c)}catch{return}d(l.result)},l.readAsDataURL(c)};return e.jsxs("div",{className:"flex flex-row items-center justify-center overflow-auto",children:[e.jsxs("label",{className:"bg-lightButton dark:bg-darkButton text-white py-2 px-4 rounded-2xl cursor-pointer hover:bg-blue-600 active:scale-95",children:["Upload Image",e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:g})]}),r&&e.jsx("div",{className:" rounded-lg overflow-hidden ml-10",style:{width:`${n}rem`,height:`${p}rem`},children:e.jsx("img",{src:r,alt:"Uploaded Preview",className:"w-full h-full object-cover"})})]})};function E(){const{baseApiUrl:r,theme:d}=C(),{uid:n,profileImage:p,setProfileImage:u,bgImage:g,setBgImage:h,moto:c,setMoto:l,userType:i,axiosSecure:m}=P(),[x,j]=b.useState(""),[w,k]=b.useState("");function v(){if(x!==w){t.error("Passwords do not match",{containerId:"settings",toastId:"passwordsDoNotMatch"});return}m.post(`${i}/updatePassword/`,{password:x,uid:n}).then(s=>{t.success(s.data.message,{containerId:"settings"})}).catch(s=>{console.error(s)})}function N(s){const a=new FormData;a.append("image",s),a.append("uid",n),m.post(`${i}/updateProfileImage/`,a).then(o=>{t.success(o.data.message,{containerId:"settings"})}).catch(o=>{throw console.error(o),t.error("Error updating profile image",{containerId:"settings"}),new Error("Error updating profile image")})}function I(s){const a=new FormData;a.append("image",s),a.append("uid",n),m.post(`${i}/updateBgImage/`,a).then(o=>{t.success(o.data.message,{containerId:"settings"})}).catch(o=>{throw console.error(o),t.error("Error updating background image",{containerId:"settings"}),new Error("Error updating background image")})}function y(s){m.post(`${i}/updateMoto/`,{moto:s,uid:n}).then(a=>{t.success(`Your Moto is now: ${s}`,{containerId:"settings",toastId:"motoUpdated"})}).catch(a=>{throw console.error(a),t.error("Error updating moto",{containerId:"settings"}),new Error("Error updating moto")})}return e.jsxs("div",{children:[e.jsx(B,{containerId:"settings",position:"top-right",theme:d}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold py-2",children:"Change Password"}),e.jsxs("div",{className:"",children:[e.jsx("input",{className:"p-1 rounded-md  dark:bg-[#1e293b] dark:text-darkText",id:"passwd",autoComplete:"new-password",value:x,onChange:s=>j(s.target.value),type:"password",placeholder:"New Password"}),e.jsx("input",{type:"checkbox",className:"ml-4 my-auto dark:bg-[#1e293b] dark:text-darkText",onChange:s=>{s.target.checked?document.getElementById("passwd").type="text":document.getElementById("passwd").type="password"}}),e.jsxs("div",{className:"py-2 flex sm:flex-row flex-col gap-4",children:[e.jsx("input",{className:"p-1 rounded-md w-fit dark:bg-[#1e293b] dark:text-darkText",value:w,autoComplete:"new-password",onChange:s=>k(s.target.value),type:"password",placeholder:"Confirm Password"}),e.jsx("button",{className:"ml-8 p-1 px-2 rounded-xl bg-lightButton w-fit text-white active:scale-95 dark:bg-darkButton",onClick:v,children:"Change Password"})]})]})]}),e.jsx("hr",{className:"border-b border-black dark:border-white"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold py-2",children:"Change Profile Image"}),e.jsx("div",{className:"flex py-4",children:e.jsx(f,{image:p,setImage:u,w:10,h:10,updateImage:N})})]}),e.jsx("hr",{className:"border-b border-black dark:border-white"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold py-2",children:"Change Home Background"}),e.jsx("div",{className:"flex py-4",children:e.jsx(f,{image:g,setImage:h,w:25,h:6,updateImage:I})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold py-2",children:"Change Your Moto"}),e.jsxs("div",{children:[e.jsx("textarea",{className:"p-1 rounded-md dark:bg-[#1e293b] dark:text-darkText w-1/2",placeholder:"Your Moto",rows:3,value:c||"",onChange:s=>l(s.target.value),maxLength:500}),e.jsx("button",{className:"ml-8 p-1 px-2 rounded-xl bg-lightButton w-fit text-white active:scale-95  dark:bg-darkButton",onClick:()=>y(c),children:"Save"})]})]})]})}function M(){const[r,d]=b.useState("account");return e.jsx("div",{children:e.jsxs("div",{children:[e.jsxs("header",{className:"sm:p-8 ",children:[e.jsx("nav",{children:e.jsxs("ul",{className:"flex flex-row ",children:[e.jsx("li",{id:"account",className:"",children:e.jsx("button",{className:`w-24 py-2 px-4 dark:border-white border-black hover:border-b ${r==="account"?"border-b font-semibold":""}`,onClick:()=>{d("account")},children:"Account"})}),e.jsx("li",{id:"general",className:"",children:e.jsx("button",{className:`w-24 py-2 px-4 dark:border-white border-black hover:border-b ${r==="general"?"border-b font-semibold":""}`,onClick:()=>{d("general")},children:"General"})})]})}),e.jsx("hr",{className:"dark:brightness-[25%] brightness-[90%]"})]}),e.jsx("div",{className:"sm:px-14",children:r==="account"&&e.jsx(E,{})})]})})}export{M as default};
